<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/form.css">
    <title>Test</title>
</head>

<body>
<form class="login-form">
    <h1>Login</h1>
    <div class="form-input-material">
        <input type="text" name="username" id="username" placeholder="" autocomplete="off" required
               class="form-control-material"/>
        <label for="username">Username</label>
    </div>
    <div class="form-input-material">
        <input type="password" name="password" id="password" placeholder="" autocomplete="off" required
               class="form-control-material"/>
        <label for="password">Password</label>
    </div>
    <button id="btnSubmit" type="submit" class="btn btn-ghost" onclick="">Login111</button>
</form>
<script>
  const btnSubmit = document.querySelector('#btnSubmit');
  const formRegisterSchedule = document.querySelector('.login-form');
  btnSubmit.addEventListener('click', submitFormHandler);

  function submitFormHandler(evt) {
    evt.preventDefault();
    //authWithEmailAndPassword('zucca@gmail.com', 123456);
    putScheduleInDatabase();
  }

  // function authWithEmailAndPassword(email, password) {
  //  const apiKey = 'AIzaSyDMLR1XYP9NpvZbXZbBxBLEWB1Ssx528ms'

  //  return fetch(`https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${apiKey}`, {
  //    method: 'POST',
  //    body: JSON.stringify({
  //     email,
  //     password,
  //     returnSecureToken: true
  //    }),
  //    headers: {
  //     'Content-Type': 'application/json'
  //    }
  //   })
  //   .then(response => response.json())
  //   .then(data => data.idToken)
  //   .then(token => fetch(`https://la-sceda-di-lavoro-default-rtdb.firebaseio.com/test.json?auth=${token}`))
  //   .then(response => response.json())
  //   .then(console.log);
  // }



  function putScheduleInDatabase() {
    const date = new Date().toDateString();
    const dataForSaveInDatabase = {
      date:
        {
          nameBuilding: formRegisterSchedule.building.value,
          description: formRegisterSchedule.description.value,
          date,

        }
    };

    const hour = document.querySelectorAll('.hour');
    for (let item of hour) {
      if (item.classList.contains('item_checked'))
        date.hour = item.textContent;
    }

    console.log(dataForSaveInDatabase);
  }


  //   fetch(`https://la-sceda-di-lavoro-default-rtdb.firebaseio.com/test.json`, {
  //       method: 'PATCH',
  //       body: JSON.stringify(dataForSaveSchedule),
  //       headers: {
  //         'Content-Type': 'application/json'
  //       }
  //     }
  //   )
  //     .then(response => response)
  //     .then(console.log);
  // }


</script>
</body>

</html>
